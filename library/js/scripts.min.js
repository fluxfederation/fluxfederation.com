function create_office_maps(){create_office_map("nz-map",-41.285402,174.776642),create_office_map("aust-map",-37.816193,144.962947),create_office_map("uk-map",52.477391,-1.911156)}function create_office_map(e,t,a){var o=document.getElementById(e),r={lat:t,lng:a},n=[{elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f5f5"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road.arterial",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#dadada"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#c9c9c9"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]}],l={center:new google.maps.LatLng(r.lat,r.lng),scrollwheel:!1,zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,zoomControl:!0,draggable:!0,scaleControl:!0,keyboardShortcuts:!1,mapTypeControl:!1,zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_CENTER},disableDefaultUI:!0,styles:n},i=new google.maps.Map(o,l),s={url:"/library/img/contact-flux-pin.svg",scaledSize:new google.maps.Size(30,41)};new google.maps.Marker({position:r,optimized:!1,icon:s}).setMap(i)}function get_url_param(e){for(var t=decodeURIComponent(window.location.search.substring(1)),a=t.split("&"),o=void 0,r=0;r<a.length;++r){var n=a[r].split("=");if(n[0]===e){o=n[1];break}}return o}var isIE=!!document.documentMode;!function($){function e(){s>=0&&clearTimeout(s),$(".hamburger").addClass("open"),$("nav.nav").addClass("open").addClass("mobile")}function t(){$(".hamburger").removeClass("open"),$("nav.nav").removeClass("open"),s=setTimeout(function(){$("nav.nav").removeClass("mobile"),hamburgerTimeer=-1},500)}function a(){var e=$(".meet-the-flux-screens");if(e.length){var t=$(".meet-the-flux-screens .overlay img"),a=t.height(),o=$(".meet-the-flux-screens .overlay").height(),r=a-o,n=$(window).height(),l=.1*-n,i=.6*n,s=e.offset().top-$(document).scrollTop(),p=0;if(s>i);else if(s<l)p=-r;else{var m=(s-l)/(i-l);p=-(1-m)*r}$(t).css("top",p+"px")}}function o(e){var t=$("#header"),a=0;"fixed"===t.css("position")&&(a=t.outerHeight());var o=$("#masthead"),r=$(o).position().top+$(o).outerHeight(),n=$("#in-page-nav"),l=n.outerHeight(),i=r-e,s=$("#in-page-nav-spacer");i<=a?(n.css({position:"fixed",top:a+"px",zIndex:1}),n.addClass("fixed"),s.length||(s=$('<div id="in-page-nav-spacer" />'),o.after(s)),s.css("height",l+"px")):(n.css({position:"relative",top:"auto"}),n.removeClass("fixed"),s.length&&s.detach())}function r(e,t){if(e.length){var a=$(e).attr("id"),o=$(e).attr("class"),r=$(e).attr("src");jQuery.get(r,function(r){var n=$(r).find("svg");void 0!==a&&$(n).attr("id",a),void 0!==o&&$(n).attr("class",o+" replaced-svg"),$(n).removeAttr("xmlns:a"),!$(n).attr("viewBox")&&$(n).attr("height")&&$(n).attr("width")&&$(n).attr("viewBox","0 0 "+$(n).attr("height")+" "+$(n).attr("width")),$(e).replaceWith($(n)),void 0!==t&&t(n)},"xml")}}function n(e,t){$(e+" .arrows3").show()}var l=-1;$(document).ready(function(){function a(){if(l>=2){var e=$(".markets .country.open");$.each($(".markets .country.open"),function(e,t){var a=$(t).next(".retailers"),o=a.find(".inner");o.fadeTo(250,0),a.slideUp(250,function(){$(t).removeClass("open"),a.removeClass("open"),a.removeAttr("style"),o.removeAttr("style")})})}}r($(".rocket-man img")),isIE&&$("body").addClass("ie"),$("#jobs").length&&$.getJSON("https://careers.pageuppeople.com/616/flux/en/jobs.json",function(e){if($("#jobs").html(""),e.length){for(var t=16,a="",o=0;o<e.length;++o){var r=e[o],n=Math.floor(16*Math.random())+1;a+='<section class="job job-'+r.Id+'">',a+='<div class="fluxy">',a+='<div class="image">',a+='<img src="../../library/img/fluxies/fluxy-'+n+'.svg" />',a+="</div>",a+="</div>",a+='<div class="description">',a+="<h4>"+r.Title+"</h4>",a+='<p class="large">'+r.Locations+"</p>",a+="<p>"+r.Summary+"</p>",a+='<div class="flux-button">',a+='<a class="read-more" href="#">Read more</a>',a+="</div>",a+='<div class="overview">'+r.Overview,a+='<div class="flux-button">',a+='<a href="'+r.ApplyUrl+'" target="_blank">Apply</a>',a+="</div>",a+="</div>",a+="</div>",a+="</section>"}$("#jobs").html(a),$(".job .description .flux-button a.read-more").on("click",function(e){e.preventDefault();var t=$(this).parent(),a=$(this);if(t.length){var o=t.next(".overview");o.length&&(t.hasClass("open")?(a.html("Read more"),t.removeClass("open"),o.slideUp(750)):(a.html("Read less"),t.addClass("open"),o.slideDown(750)))}}),$("main").removeClass("no-jobs")}else $("main").addClass("no-jobs"),$.get("/careers/opportunities/no-job-openings.html",function(e){$("#jobs").html(e)})}),$(".video-wrapper .thumbnail-wrapper .thumbnail a").on("click",function(e){e.preventDefault();var t=$(this).data("video-id");if(t>0){var a=$(this).closest(".video-wrapper").find("iframe");a.length&&$(a).attr("src","https://player.vimeo.com/video/"+t+"?autoplay=1&title=0&byline=0&portrait=0")}}),$(".location-page .location-wrapper a").on("click",function(e){e.preventDefault();var t=$(this).attr("href");$("html, body").animate({scrollTop:$(t).offset().top},1500)});var o=!1;$("#get-in-touch-form").validate({rules:{"entry.1629797745":{required:!0,minlength:3,maxlength:30,noNumbers:!0},"entry.368106203":{required:!0,email:!0,emailBetterDomain:!0,minlength:5,maxlength:30},"entry.113701146":{required:!0,minlength:3}},errorPlacement:function(e,t){},submitHandler:function(e){e.submit(),o=!0,setTimeout(function(){window.location="/thank-you/?thank=get-in-touch"},1e3)}}),$("#get-in-touch-response").on("load",function(e){return!o});var i=!1;$("#talk-to-us-form").validate({rules:{"entry.514709734":{required:!0,maxlength:30,minlength:3,noNumbers:!0},"entry.365974255":{required:!0,maxlength:30,minlength:3},"entry.979571740":{required:!0,maxlength:30,minlength:3},"entry.1009693116":{required:!0,email:!0,emailBetterDomain:!0,maxlength:30,minlength:5},"entry.1675168538":{required:!0,minlength:3},"entry.1152685397":{required:!0}},errorPlacement:function(e,t){},submitHandler:function(e){e.submit(),i=!0,setTimeout(function(){window.location="/thank-you/?thank=talk-to-us"},1e3)}}),$("#talk-to-us-response").on("load",function(e){return!i}),$("a.down-arrow").on("click",function(e){e.preventDefault();var t=$(this).attr("href");$("html, body").animate({scrollTop:$(t).offset().top},500)}),$(".what-is-flux-diagram .arrows").length&&n(".what-is-flux-diagram",1),$(".what-is-flux-diagram-mobile .arrows").length&&n(".what-is-flux-diagram-mobile",1);var s=$(".clouds");if(s.length){var p=$(s).children("img");if(p.length){var m=$(window).width();$.each(p,function(e,t){var a=parseInt(Math.random()*m),o=parseInt(Math.random()*$(t).height()*3.5);$(t).css({left:a+"px",top:o+"px",display:"block"})}),setInterval(function(){$.each(p,function(e,t){var a=$(t).position().left,o=$(t).position().top,r=$(t).width();a+=.2+.1*e,a>=$(window).width()&&(a=-r,o=parseInt(Math.random()*$(t).height()*3.5)),$(t).css({left:a+"px",top:o+"px"})})},10)}}var c=get_url_param("thank");void 0!==c&&$("#"+c+"-thank-you").show();var f=get_url_param("scroll");if(void 0!==f){var d=$("#"+f).offset().top;$("html, body").animate({scrollTop:d+"px"},1e3)}$(".hamburger").on("click",function(a){a.preventDefault(),$(this).hasClass("open")?t():e()}),$("a.scroll-to-footer").on("click",function(e){e.preventDefault(),t();var a=$("#footer").offset().top;$("html, body").animate({scrollTop:a+"px"},1e3)}),$("a.drop-us-a-line").on("click",function(e){e.preventDefault();var t=$(this).closest(".hasreveal");if(t.length){var a=$(t[0]).find(".slider");a.length&&(a.hasClass("open")?(a.removeClass("open"),a.slideUp(500)):(a.addClass("open"),a.slideDown(500)))}}),$("a.gform").on("click",function(e){e.preventDefault();var t=$(this).attr("href");$("#"+t).submit()}),$(".markets .country").on("click",function(e){if(e.preventDefault(),l<2){var t=$(this),a=t.next(".retailers"),o=a.find(".inner");a.length&&(a.hasClass("open")?a.stop().slideUp(250,function(){t.removeClass("open").removeAttr("style"),a.removeClass("open").removeAttr("style"),o.removeAttr("style")}):(t.addClass("open"),a.stop().addClass("open").slideDown(250),o.removeAttr("style")))}}),$(".markets .country").on("mouseenter",function(e){if(a(),l>=2){var t=$(this),o=t.next(".retailers"),r=o.find(".inner");t.hasClass("open")||(t.addClass("open"),r.fadeTo(250,1),o.slideDown(250,function(){o.addClass("open"),o.removeAttr("style"),r.removeAttr("style")}))}}),$(".markets").on("mouseleave",function(e){a()}),$(".leadership-member-container .flux-button a").on("click",function(e){e.preventDefault();var t=$(this).parent().parent().parent().next(".leadership-member-decription");t.length&&t.fadeIn(500)}),$(".leadership-member-decription .flux-button a").on("click",function(e){e.preventDefault(),$(this).parent().parent().parent().fadeOut(500)}),$("#roles .profile").on("mouseenter",function(e){e.preventDefault();var t=$(this).attr("class").replace("profile","").trim();t.length&&$(".bio."+t).slideDown(250,function(){})}),$("#roles .profile").on("mouseleave",function(e){e.preventDefault();var t=$(this).attr("class").replace("profile","").trim();t.length&&($(".bio."+t).css("zIndex",1e4),$(".bio."+t).slideUp(250,function(){$(this).removeAttr("style")}))})});var i=0;$(window).on("resize orientationchange load scroll",function(){var e=window.getComputedStyle(document.body,":after");if(void 0!==e){var r=e.getPropertyValue("content");'"'===r.charAt(0)&&(r=r.substr(1,r.length-1)),'"'===r.charAt(r.length-1)&&(r=r.substr(0,r.length-1));var n=parseInt(r);n!==l&&(l<2&&n>=2&&($(".markets .country").removeClass("open").removeAttr("style"),$(".markets .retailers").removeClass("open").removeAttr("style"),$(".markets .retailers .inner").removeAttr("style")),(l=n)>=2&&t())}var i=$(this).scrollTop()+.5*$(this).height(),s=$("#world-markets");if(s.length){var p=$(s).offset().top+.5*$(s).height(),m=200;p<=i+m&&($(".globe .pin").addClass("animate"),$(".globe .label").addClass("animate"))}var c=$("#flexible-section");if(c.length){var f=$(c).offset().top+.5*$(c).height(),m=200;f<=i+m&&($("#flexible-section .flexible-animation .old-slice").addClass("animate"),$("#flexible-section .flexible-animation .new-slice").addClass("animate"))}var d=$("#simple-section");if(d.length){var f=$(d).offset().top+.5*$(d).height(),m=200;f<=i+m&&($("#simple-section .simple-animation .outer").addClass("animate"),$("#simple-section .simple-animation .middle").addClass("animate"))}$.each($(".parallax"),function(e,t){var a=$(t).find(".parallax-bottom"),o=$(t).find(".parallax-middle"),r=$(t).find(".parallax-top");if(a.length&&o.length&&r.length){var n=$(o).offset().top+.5*$(o).height();0!=n&&($(a).css("top",.05*(i-n)+"px"),$(r).css("top",.15*(i-n)+"px"))}});var u=$(this).scrollTop();u<50&&$("main").hasClass("scroll")?($("#header").removeClass("scroll"),$("main").removeClass("scroll"),setTimeout(function(){o($(window).scrollTop())},250)):u>=50&&!$("main").hasClass("scroll")?($("#header").addClass("scroll"),$("main").addClass("scroll"),setTimeout(function(){o($(window).scrollTop())},250)):o(u),a()});var s=-1}(jQuery),jQuery.validator.addMethod("emailBetterDomain",function(e,t){var a=this.optional(t);if(!1===a){var o=e.split("@");if(2==o.length){a=o[1].split(".").length>1}}return a},""),jQuery.validator.addMethod("noNumbers",function(e,t){var a=this.optional(t);if(!1===a){var o=new RegExp("[0-9]"),r=parseInt(o.exec(e));a=isNaN(r)}return a},"");