function create_office_maps(){create_office_map("nz-map",-41.285402,174.776642),create_office_map("aust-map",-37.816193,144.962947),create_office_map("uk-map",52.477391,-1.911156)}function create_office_map(e,t,o){var a=document.getElementById(e),r={lat:t,lng:o},n=[{elementType:"geometry",stylers:[{color:"#f5f5f5"}]},{elementType:"labels.icon",stylers:[{visibility:"off"}]},{elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{elementType:"labels.text.stroke",stylers:[{color:"#f5f5f5"}]},{featureType:"administrative.land_parcel",elementType:"labels.text.fill",stylers:[{color:"#bdbdbd"}]},{featureType:"poi",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"poi",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"poi.park",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"poi.park",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"road",elementType:"geometry",stylers:[{color:"#ffffff"}]},{featureType:"road.arterial",elementType:"labels.text.fill",stylers:[{color:"#757575"}]},{featureType:"road.highway",elementType:"geometry",stylers:[{color:"#dadada"}]},{featureType:"road.highway",elementType:"labels.text.fill",stylers:[{color:"#616161"}]},{featureType:"road.local",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]},{featureType:"transit.line",elementType:"geometry",stylers:[{color:"#e5e5e5"}]},{featureType:"transit.station",elementType:"geometry",stylers:[{color:"#eeeeee"}]},{featureType:"water",elementType:"geometry",stylers:[{color:"#c9c9c9"}]},{featureType:"water",elementType:"labels.text.fill",stylers:[{color:"#9e9e9e"}]}],l={center:new google.maps.LatLng(r.lat,r.lng),scrollwheel:!1,zoom:15,mapTypeId:google.maps.MapTypeId.ROADMAP,mapTypeControl:!1,zoomControl:!0,draggable:!0,scaleControl:!0,keyboardShortcuts:!1,mapTypeControl:!1,zoomControlOptions:{position:google.maps.ControlPosition.RIGHT_CENTER},disableDefaultUI:!0,styles:n},i=new google.maps.Map(a,l),s={url:"/library/img/contact-flux-pin.svg",scaledSize:new google.maps.Size(30,41)};new google.maps.Marker({position:r,optimized:!1,icon:s}).setMap(i)}function get_url_param(e){for(var t=decodeURIComponent(window.location.search.substring(1)),o=t.split("&"),a=void 0,r=0;r<o.length;++r){var n=o[r].split("=");if(n[0]===e){a=n[1];break}}return a}var isIE=!!document.documentMode;!function($){function e(){s>=0&&clearTimeout(s),$(".hamburger").addClass("open"),$("nav.nav").addClass("open").addClass("mobile")}function t(){$(".hamburger").removeClass("open"),$("nav.nav").removeClass("open"),s=setTimeout(function(){$("nav.nav").removeClass("mobile"),hamburgerTimeer=-1},500)}function o(){var e=$(".meet-the-flux-screens");if(e.length){var t=$(".meet-the-flux-screens .overlay img"),o=t.height(),a=$(".meet-the-flux-screens .overlay").height(),r=o-a,n=$(window).height(),l=.1*-n,i=.6*n,s=e.offset().top-$(document).scrollTop(),p=0;if(s>i);else if(s<l)p=-r;else{var m=(s-l)/(i-l);p=-(1-m)*r}$(t).css("top",p+"px")}}function a(e){var t=$("#header"),o=0;"fixed"===t.css("position")&&(o=t.outerHeight());var a=$("#masthead"),r=$(a).position().top+$(a).outerHeight(),n=$("#in-page-nav"),l=n.outerHeight(),i=r-e,s=$("#in-page-nav-spacer");i<=o?(n.css({position:"fixed",top:o+"px",zIndex:1}),n.addClass("fixed"),s.length||(s=$('<div id="in-page-nav-spacer" />'),a.after(s)),s.css("height",l+"px")):(n.css({position:"relative",top:"auto"}),n.removeClass("fixed"),s.length&&s.detach())}function r(e,t){if(e.length){var o=$(e).attr("id"),a=$(e).attr("class"),r=$(e).attr("src");jQuery.get(r,function(r){var n=$(r).find("svg");void 0!==o&&$(n).attr("id",o),void 0!==a&&$(n).attr("class",a+" replaced-svg"),$(n).removeAttr("xmlns:a"),!$(n).attr("viewBox")&&$(n).attr("height")&&$(n).attr("width")&&$(n).attr("viewBox","0 0 "+$(n).attr("height")+" "+$(n).attr("width")),$(e).replaceWith($(n)),void 0!==t&&t(n)},"xml")}}function n(e,t){$(e+" .arrows3").show()}var l=-1;$(document).ready(function(){function o(){l>=2&&$.each($(".markets .country.open"),function(e,t){var o=$(t).next(".retailers"),a=o.find(".inner");a.fadeTo(250,0),o.slideUp(250,function(){$(t).removeClass("open"),o.removeClass("open"),o.removeAttr("style"),a.removeAttr("style")})})}function a(){l>=2&&$.each($("#roles .profile.open"),function(e,t){$(t).removeClass("open");var o=$(t).next(".bio"),a=o.find(".inner");a.fadeTo(250,0),o.slideUp(250,function(){o.removeClass("open").removeAttr("style"),a.removeAttr("style")})})}r($(".rocket-man img")),isIE&&$("body").addClass("ie"),$("#jobs").length&&$.getJSON("https://careers.pageuppeople.com/616/flux/en/jobs.json",function(e){if($("#jobs").html(""),e.length){for(var t=16,o="",a=0;a<e.length;++a){var r=e[a],n=Math.floor(16*Math.random())+1;o+='<section class="job job-'+r.Id+'">',o+='<div class="fluxy">',o+='<div class="image">',o+='<img src="../../library/img/fluxies/fluxy-'+n+'.svg" />',o+="</div>",o+="</div>",o+='<div class="description">',o+="<h4>"+r.Title+"</h4>",o+='<p class="large">'+r.Locations+"</p>",o+="<p>"+r.Summary+"</p>",o+='<div class="flux-button">',o+='<a class="read-more" href="#">Read more</a>',o+="</div>",o+='<div class="overview">'+r.Overview,o+='<div class="flux-button">',o+='<a href="'+r.ApplyUrl+'" target="_blank">Apply</a>',o+="</div>",o+="</div>",o+="</div>",o+="</section>"}$("#jobs").html(o),$(".job .description .flux-button a.read-more").on("click",function(e){e.preventDefault();var t=$(this).parent(),o=$(this);if(t.length){var a=t.next(".overview");a.length&&(t.hasClass("open")?(o.html("Read more"),t.removeClass("open"),a.slideUp(750)):(o.html("Read less"),t.addClass("open"),a.slideDown(750)))}}),$("main").removeClass("no-jobs")}else $("main").addClass("no-jobs"),$.get("/careers/opportunities/no-job-openings.html",function(e){$("#jobs").html(e)})}),$(".video-wrapper .thumbnail-wrapper .thumbnail a").on("click",function(e){e.preventDefault();var t=$(this).data("video-id");if(t>0){var o=$(this).closest(".video-wrapper").find("iframe");o.length&&$(o).attr("src","https://player.vimeo.com/video/"+t+"?autoplay=1&title=0&byline=0&portrait=0")}}),$(".location-page .location-wrapper a").on("click",function(e){e.preventDefault();var t=$(this).attr("href");$("html, body").animate({scrollTop:$(t).offset().top},1500)});var i=!1;$("#get-in-touch-form").validate({rules:{"entry.1629797745":{required:!0,minlength:3,maxlength:30,noNumbers:!0},"entry.368106203":{required:!0,email:!0,emailBetterDomain:!0,minlength:5,maxlength:30},"entry.113701146":{required:!0,minlength:3}},errorPlacement:function(e,t){},submitHandler:function(e){e.submit(),i=!0,setTimeout(function(){window.location="/thank-you/?thank=get-in-touch"},1e3)}}),$("#get-in-touch-response").on("load",function(e){return!i});var s=!1;$("#talk-to-us-form").validate({rules:{"entry.514709734":{required:!0,maxlength:30,minlength:3,noNumbers:!0},"entry.365974255":{required:!0,maxlength:30,minlength:3},"entry.979571740":{required:!0,maxlength:30,minlength:3},"entry.1009693116":{required:!0,email:!0,emailBetterDomain:!0,maxlength:30,minlength:5},"entry.1675168538":{required:!0,minlength:3},"entry.1152685397":{required:!0}},errorPlacement:function(e,t){},submitHandler:function(e){e.submit(),s=!0,setTimeout(function(){window.location="/thank-you/?thank=talk-to-us"},1e3)}}),$("#talk-to-us-response").on("load",function(e){return!s}),$("a.down-arrow").on("click",function(e){e.preventDefault();var t=$(this).attr("href");$("html, body").animate({scrollTop:$(t).offset().top},500)}),$(".what-is-flux-diagram .arrows").length&&n(".what-is-flux-diagram",1),$(".what-is-flux-diagram-mobile .arrows").length&&n(".what-is-flux-diagram-mobile",1);var p=$(".clouds");if(p.length){var m=$(p).children("img");if(m.length){var c=$(window).width();$.each(m,function(e,t){var o=parseInt(Math.random()*c),a=parseInt(Math.random()*$(t).height()*3.5);$(t).css({left:o+"px",top:a+"px",display:"block"})}),setInterval(function(){$.each(m,function(e,t){var o=$(t).position().left,a=$(t).position().top,r=$(t).width();o+=.2+.1*e,o>=$(window).width()&&(o=-r,a=parseInt(Math.random()*$(t).height()*3.5)),$(t).css({left:o+"px",top:a+"px"})})},10)}}var d=get_url_param("thank");void 0!==d&&$("#"+d+"-thank-you").show();var f=get_url_param("scroll");if(void 0!==f){var u=$("#"+f).offset().top;$("html, body").animate({scrollTop:u+"px"},1e3)}$(".hamburger").on("click",function(o){o.preventDefault(),$(this).hasClass("open")?t():e()}),$("a.scroll-to-footer").on("click",function(e){e.preventDefault(),t();var o=$("#footer").offset().top;$("html, body").animate({scrollTop:o+"px"},1e3)}),$("a.drop-us-a-line").on("click",function(e){e.preventDefault();var t=$(this).closest(".hasreveal");if(t.length){var o=$(t[0]).find(".slider");o.length&&(o.hasClass("open")?(o.removeClass("open"),o.slideUp(500)):(o.addClass("open"),o.slideDown(500)))}}),$("a.gform").on("click",function(e){e.preventDefault();var t=$(this).attr("href");$("#"+t).submit()}),$(".markets .country").on("click",function(e){if(e.preventDefault(),l<2){var t=$(this),o=t.next(".retailers"),a=o.find(".inner");o.length&&(o.hasClass("open")?o.stop().slideUp(250,function(){t.removeClass("open").removeAttr("style"),o.removeClass("open").removeAttr("style"),a.removeAttr("style")}):(t.addClass("open"),o.stop().addClass("open").slideDown(250),a.removeAttr("style")))}}),$(".markets .country").on("mouseenter",function(e){if(o(),l>=2){var t=$(this),a=t.next(".retailers"),r=a.find(".inner");t.hasClass("open")||(t.addClass("open"),r.fadeTo(250,1),a.slideDown(250,function(){a.addClass("open"),a.removeAttr("style"),r.removeAttr("style")}))}}),$(".markets").on("mouseleave",function(e){o()}),$(".leadership-member-container .flux-button a").on("click",function(e){e.preventDefault();var t=$(this).parent().parent().parent().next(".leadership-member-decription");t.length&&t.fadeIn(500)}),$(".leadership-member-decription .flux-button a").on("click",function(e){e.preventDefault(),$(this).parent().parent().parent().fadeOut(500)}),$("#roles .profile").on("mouseenter",function(e){if(a(),l>=2){var t=$(this),o=t.next(".bio"),r=o.find(".inner");t.hasClass("open")||(t.addClass("open"),r.fadeTo(250,1),o.slideDown(250,function(){o.addClass("open").removeAttr("style"),r.removeAttr("style")}))}}),$("#roles article").on("mouseleave",function(e){a()})});var i=0;$(window).on("resize orientationchange load scroll",function(){var e=window.getComputedStyle(document.body,":after");if(void 0!==e){var r=e.getPropertyValue("content");'"'===r.charAt(0)&&(r=r.substr(1,r.length-1)),'"'===r.charAt(r.length-1)&&(r=r.substr(0,r.length-1));var n=parseInt(r);n!==l&&(l<2&&n>=2&&($(".markets .country").removeClass("open").removeAttr("style"),$(".markets .retailers").removeClass("open").removeAttr("style"),$(".markets .retailers .inner").removeAttr("style")),(l=n)>=2&&t())}var i=$(this).scrollTop()+.5*$(this).height(),s=$("#world-markets");if(s.length){var p=$(s).offset().top+.5*$(s).height(),m=200;p<=i+m&&($(".globe .pin").addClass("animate"),$(".globe .label").addClass("animate"))}var c=$("#flexible-section");if(c.length){var d=$(c).offset().top+.5*$(c).height(),m=200;d<=i+m&&($("#flexible-section .flexible-animation .old-slice").addClass("animate"),$("#flexible-section .flexible-animation .new-slice").addClass("animate"))}var f=$("#simple-section");if(f.length){var d=$(f).offset().top+.5*$(f).height(),m=200;d<=i+m&&($("#simple-section .simple-animation .outer").addClass("animate"),$("#simple-section .simple-animation .middle").addClass("animate"))}$.each($(".parallax"),function(e,t){var o=$(t).find(".parallax-bottom"),a=$(t).find(".parallax-middle"),r=$(t).find(".parallax-top");if(o.length&&a.length&&r.length){var n=$(a).offset().top+.5*$(a).height();0!=n&&($(o).css("top",.05*(i-n)+"px"),$(r).css("top",.15*(i-n)+"px"))}});var u=$(this).scrollTop();u<50&&$("main").hasClass("scroll")?($("#header").removeClass("scroll"),$("main").removeClass("scroll"),setTimeout(function(){a($(window).scrollTop())},250)):u>=50&&!$("main").hasClass("scroll")?($("#header").addClass("scroll"),$("main").addClass("scroll"),setTimeout(function(){a($(window).scrollTop())},250)):a(u),o()});var s=-1}(jQuery),jQuery.validator.addMethod("emailBetterDomain",function(e,t){var o=this.optional(t);if(!1===o){var a=e.split("@");if(2==a.length){o=a[1].split(".").length>1}}return o},""),jQuery.validator.addMethod("noNumbers",function(e,t){var o=this.optional(t);if(!1===o){var a=new RegExp("[0-9]"),r=parseInt(a.exec(e));o=isNaN(r)}return o},"");