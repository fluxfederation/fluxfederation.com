captcha_sitekey="6LcAZbsUAAAAAGfUVO4VBM5DVEkPySuVX186Kg72",submitted_form_id=null,captcha_response=null,captchaLoaded=()=>{$(document).ready(function(){captchaAndDocumentLoaded()})},$(document).ready(function(){captchaAndDocumentLoaded=()=>{appendCaptchaWatcher(),initCaptcha(),toggleCaptchaBadgeDisplay(),setupForms()},shouldIncludeCaptcha=a=>{for(var b of a)if("captcha"==b.type)return!0},appendCaptchaWatcher=()=>$("body").append(`<div id="recaptcha" data-size="invisible"></div>`),initCaptcha=()=>{grecaptcha.render(`recaptcha`,{sitekey:captcha_sitekey,callback:function(a){captcha_response=a,$(`form#${submitted_form_id}`).submit()}})},toggleCaptchaBadgeDisplay=()=>{$("#talk-to-us").length||$("#brochure-download-form-container").length||(display=$(".grecaptcha-badge").css("display"),display="block"==display?"none":"block",$(".grecaptcha-badge").css({display:display}))},$("body").on("click","a.drop-us-a-line",()=>{toggleCaptchaBadgeDisplay()})});
$(document).ready(function(){$(".case-studies-page").length&&function(){return new Promise((a,b)=>{$.ajax({url:"https://cms.fluxfederation.com/wp-json/fluxapi/v1/case-studies",crossDomain:!0,success:b=>a(b),error:a=>b(a)})})}().then(b=>{self.case_studies=b,a(b)});const a=(a=self.case_studies,c=$(".case-studies-section"))=>{html=``,n=0;for(var d=0;6>d;d++)a.length&&(n++,item=a[0],1==n?html+=`<div class="news-items-row">`:"",html+=b(item),3==n||1==a.length?html+=`</div>`:"",3==n?n=0:"",a.splice(0,1));c.append(html)},b=a=>(console.log(a),html=`<div class="m-all t-4of12 news-item">
			<a href="post/?name=${a.post_name}">
				<img src="${a.logo}" class="item-image">
				<h4>${a.post_title}</h4>
			</a>
			<p class="preview">${a.subheader}</p>
			${c(a.post_name)}
		</div>`,html),c=a=>`<div class="flux-button news-item-button"><a href="/solutions/case-studies/post?name=${a}">Read More</a></div>`});
$(document).ready(function(){"true"==localStorage.getItem("cookies-ok")?"":$(".cookie-disclaimer").show(),setCookiesClose=()=>{localStorage.setItem("cookies-ok","true")},$("body").on("click",".cookie-disclaimer-close",()=>{setCookiesClose(),$(".cookie-disclaimer").hide()})});
submitted_form_id=null,$(document).ready(function(){function a(a){return new Promise((b,c)=>{$.ajax({url:"https://cms.fluxfederation.com/wp-json/fluxapi/v1/form/"+a,crossDomain:!0,success:function(a){b(a)},error:function(a){c(a)}})})}function b(a){return console.log(a),form_id=a.form_id,new Promise((b,c)=>{$.ajax({url:"https://cms.fluxfederation.com/wp-json/fluxapi/v1/form/"+form_id,crossDomain:!0,method:"POST",dataType:"json",data:JSON.stringify(a),success:function(a){redirect_url=$(`form#${form_id}`).find("#redirect-url").val(),redirectAfterSuccess(redirect_url),b(a)},error:function(a){c(a)}})})}setupForms=()=>{$("#talk-to-us").length&&a(1).then(a=>buildForm(a)).then(a=>$(".talk-to-us-container").append(a)).then(()=>addCustomCss(talk_to_us_styles)).catch(a=>console.log(a)),$(".drop-us-a-line-container").length&&a(2).then(a=>buildForm(a)).then(a=>$(".drop-us-a-line-container").append(a)).then(()=>addCustomCss(drop_a_line_styles)).catch(a=>console.log(a)),$("#brochure-download-form-container").length&&a(3).then(a=>buildForm(a)).then(a=>$("#brochure-download-form-container").append(a)).then(()=>addCustomCss(brochure_download_styles)).catch(a=>console.log(a)),$("#get-in-touch-form-2").length&&a(5).then(a=>buildForm(a)).then(a=>$("#get-in-touch-form-2").append(a)).then(()=>addCustomCss(drop_a_line_styles)).catch(a=>console.log(a))},getFieldByID=(a,b)=>$(`form#${a} *[id="${b}"]`),addCustomCss=a=>{$.each(a,(a,b)=>$(a).addClass(b))},buildForm=a=>(html=hiddenIdInput(a.id),html+=hiddenRedirectUrl(a),$.each(a.fields,function(a,b){html+=createInput(b)}),html+=submitButton(a.button,a.id),$(`<form id="${a.id}" enctype="text/plain"></form>`).append(html)),createInput=a=>{switch(a.type){case"checkbox":case"radio":return radioInput(a);break;case"html":return a.content;break;case"text":return textInput(a);break;case"email":return textInput(a);break;case"textarea":return textArea(a);case"captcha":return"";}},pathFromUrl=a=>new URL(a).pathname,hiddenRedirectUrl=a=>`<input id="redirect-url" type="hidden" value="${pathFromUrl(a.confirmations[Object.keys(a.confirmations)[0]].url)}"></input>`,redirectAfterSuccess=a=>window.location.href=a,radioInput=a=>(html=`<div class="radio-buttons" id="${a.cssClass}-container" >`,$.each(a.choices,function(b,c){html+=`<p><input id="${c.value}" type="${a.type}" name="${a.id}${"checkbox"==a.type?`.${b+1}`:""}" value="${c.value}" ${c.isSelected?" checked":""}><label for="${c.value}">${c.text}</label></p>`}),html+="</div>",html),textInput=a=>`<p id="${a.cssClass}-container">${label(a)}<input id="${a.cssClass}" name="${a.id}" type="${a.type}" placeholder="${a.placeholder}"></p>`,textArea=a=>`<p id="${a.cssClass}-container">${label(a)}<textarea id="${a.cssClass}" name="${a.id}" placeholder="${a.placeholder}"></textarea></p>`,label=a=>`<label for="${a.cssClass}">${a.label}</label>`,hiddenIdInput=a=>`<input id="${a}" type="hidden" value="${a}" name="form_id"></input>`,submitButton=(a,b)=>`<div class="flux-button-container"><div class="flux-button" id="${b}"><button>${a.text}</button></div></div>`,processEntry=(a,c=null)=>{data=formDataToJson($(a).serializeArray()),c?data={...data,captcha_response:c}:"",b(data).then(a=>console.log(a)).catch(a=>console.log(a))},formDataToJson=a=>(json={},$(a).each((a,b)=>json[b.name]=b.value),json),$("body").on("click","form .flux-button",a=>{a.preventDefault(),id=a.currentTarget.id,form=$(`form#${id}`),submitted_form_id=id,allFieldsValid(id)?grecaptcha.execute():""}),$("body").on("submit","form",a=>{a.preventDefault(),form=a.currentTarget,captcha_response?processEntry(form,captcha_response):processEntry(form)}),talk_to_us_styles={"#talk-to-us #help-type-radio-container p":"m-all t-1of3","#talk-to-us #email-checkbox-container":"news","#talk-to-us #question-textarea":"full-width"},drop_a_line_styles={".drop-us-a-line-container p":"m-all",".drop-us-a-line-container p label":"m-all d-1of4",".drop-us-a-line-container input, .drop-us-a-line-container textarea":"m-all t-3of4 cf",".drop-us-a-line-container .flux-button-container":"m-all t-1of4 right cf"},brochure_download_styles={"#brochure-download-form-container #help-type-radio-container p":"m-all t-1of3","#brochure-download-form-container #email-checkbox-container":"news","#brochure-download-form-container #question-textarea":"full-width"}});
$(document).ready(function(){const a=this;$(".events-page").length&&function(){return new Promise((a,b)=>{$.ajax({url:"https://cms.fluxfederation.com/wp-json/fluxapi/v1/events",crossDomain:!0,success:function(b){a(b)},error:function(a){b(a)}})})}().then(b=>{a.events=b,$(".skeleton-event-items").remove(),b.length?h(a.events,"event",$(".events-section")):$(".no-events-banner").fadeIn()}),$(".blog-page").length&&(function(a="init"){return url=`https://cms.fluxfederation.com/wp-json/fluxapi/v1/posts`,new Promise((a,b)=>{$.ajax({url:url,crossDomain:!0,success:function(b){a(b)},error:function(a){b(a)}})})}().then(b=>{a.blogs=b,$(".skeleton-new-items").remove(),h(a.blogs,"blog",$(".blog-section"))}),$(window).on("scroll",()=>{b($("footer"))&&a.blogs.length&&h(a.blogs,"blog",$(".blog-section"))}));const b=a=>{const b=a.offset().top,c=b+a.outerHeight(),d=$(window).scrollTop(),e=d+$(window).height();return c>d&&b<e};$(".single-blog-page").length?function(){const a=()=>new URL(document.location).searchParams.get("name");return a()?new Promise((b,c)=>{$.ajax({url:`https://cms.fluxfederation.com/wp-json/fluxapi/v1/post/${a()}`,crossDomain:!0,success:function(a){b(a)},error:function(a){c(a)}})}):void c()}().then(a=>e(a)):"",$(".social-share-container li").click(a=>{switch(current_url=window.location.href,encoded_url=encodeURIComponent(current_url),test_encoded_url=encodeURIComponent("https://fluxfederation.com/"),encoded_title=encodeURIComponent(document.title),facebook_url=`https://www.facebook.com/sharer/sharer.php?u=${encoded_url}&t=${encoded_title}`,twitter_url=`http://twitter.com/share?text=${document.title}&url=${current_url}`,linkedin_url=`https://www.linkedin.com/shareArticle?mini=true&url=${test_encoded_url}&title=${encoded_title}`,a.currentTarget.id){case"facebook":window.open(facebook_url,"pop","width=600, height=400, scrollbars=no");break;case"twitter":window.open(twitter_url,"pop","width=600, height=400, scrollbars=no");break;case"linkedin":window.open(linkedin_url,"pop","width=600, height=400, scrollbars=no");break;case"mail":$(`<a href="mailto:?Subject=${encoded_title}&Body=${encoded_url}"></a>`)[0].click();}}),$(document).on("click",".show-more-blogs .flux-button",()=>h(a.blogs,"blog",$(".blog-section")));const c=()=>window.location.href="../",d=a=>(a=a.split("/"),a=new Date(parseInt(a[2]),parseInt(a[1])-1,parseInt(a[0])),day=a.getDate(),weekday=a.toLocaleString("default",{weekday:"long"}),month_short=a.toLocaleString("default",{month:"short"}),month_long=a.toLocaleString("default",{month:"long"}),{month_short:month_short,month_long:month_long,day:day,weekday:weekday}),e=a=>{""==a.post_content?c():"",$(".blog-title").text(a.post_title),$(l(a)).insertAfter(".blog-title"),$(".banner-image").attr("src",a.banner_image),$(".banner-image-caption").text(a.banner_image_caption),$(".blog-content article").html(a.post_content),$(".fb-share-button").data("href",window.location.href),$.each(a.tags,(a,b)=>$(".tags-container").append(g(b.name))),$.each(a.other_posts,(a,b)=>$(".other-posts").append(q(b))),f(a.post_title)},f=a=>document.title=`${a} - Flux Federation`,g=a=>`<div class="tag">${a}</div>`,h=(a,b,c)=>{html=``,n=0;for(var d=0;6>d;d++)a.length&&(n++,item=a[0],1==n?html+=`<div class="news-items-row">`:"",html+="blog"==b?p(item):j(item),3==n||1==a.length?html+=`</div>`:"",3==n?n=0:"",a.splice(0,1));// self.blogs.length ? html += showMorePostsButton() : ''
c.append(html)},i=a=>{const b=d(a.start_date),c=a.end_date?d(a.end_date):null;return`${b.weekday} ${b.day} ${b.month_short} ${a.end_date?`- ${c.weekday} ${c.day} ${c.month_short}`:""}`},j=a=>(html=`<div class="m-all t-4of12 news-item">
			<img src="${a.image_url}" class="item-image item-image-logo">
			<h4>${a.title}</h4>
			<div class="cf item-info event-info">
				<div class="cf">
					<p>${i(a)} ${a.start_time&&a.end_time?`${a.start_time}-${a.end_time}`:""}</p><br>
					<p class="small-text"><a href="${a.ics_file_url}">Add to Calendar</a></p><br>
				</div>
				<div class="cf">
					<p>${a.location.address.split(",")[0]}</p><br>
					<p class="small-text"><a target="_blank" href="${k(a.location.address)}">View Map</a></p>
				</div>
			</div>
			<p class="preview">${a.description}</p>
			${o(a.redirect_url)}
		</div>`,html),k=a=>`http://www.google.com/maps/?q=${encodeURIComponent(a)}`,l=a=>(console.log(a),date=d(a.date_written),html=`<div class="cf item-info">
			<strong><p class="author">By ${a.author_name}</p></strong>
			<br>
			<p class="item-meta-info">${date.month_short} ${date.day} | ${a.read_time} min read</p>
		</div>`,html),m=a=>`<div class="flux-button news-item-button"><a href="/newsroom/blog/post/?name=${a}">Read More</a></div>`,o=a=>`<div class="flux-button news-item-button"><a target="_blank" href="${a}">Read More</a></div>`,p=a=>(html=`<div class="m-all t-4of12 news-item">
			<a href="post/?name=${a.post_name}">
				<img src="${a.banner_image}" class="item-image">
				<h4>${a.post_title}</h4>
			</a>
			${l(a)}
			<p class="preview">${a.post_preview}</p>
			${m(a.post_name)}
		</div>`,html),q=a=>(html=`<div class="news-item">
			<a class="t-2of5" href="../post/?name=${a.post_name}">
				<img src="${a.banner_image}" class="item-image m-all">
			</a>
			<div class="t-3of5 m-all">
				<h4>${a.post_title}</h4>
				${l(a)}
				<p class="preview remove-all-padding">${a.post_preview}</p>
				${m(a.post_name)}
			</div>
		</div>`,html)});
$(document).ready(function(){drop_a_line__validations={"name-input":["aboveMinLength","belowMaxLength","noNumbers"],"email-input":["isEmail"],"help-textarea":["aboveMinLength"]},talk_to_us_validations={"name-input":["aboveMinLength","belowMaxLength","noNumbers"],"company-input":["aboveMinLength","belowMaxLength"],"role-input":["aboveMinLength","belowMaxLength"],"email-input":["isEmail"],"question-textarea":["aboveMinLength"]},brochure_download_validations={"name-input":["aboveMinLength","belowMaxLength","noNumbers"],"company-input":["aboveMinLength","belowMaxLength"],"role-input":["aboveMinLength","belowMaxLength"],"email-input":["isEmail"]},getValidations=a=>{switch(a){case"1":return talk_to_us_validations;break;case"2":case"5":return drop_a_line__validations;break;case"3":return brochure_download_validations;}},runValidation=(a,b)=>{switch(b){case"aboveMinLength":return aboveMinLength(a);break;case"belowMaxLength":return belowMaxLength(a);break;case"isEmail":return isEmail(a);break;case"noNumbers":return noNumbers(a);}},aboveMinLength=a=>3<=a.length,belowMaxLength=a=>30>=a.length,isEmail=a=>/\S+@\S+\.\S+/.test(a),noNumbers=a=>!/\d/.test(a),getFieldValidation=(a,b)=>getValidations(a)[b],addValidationClass=(a,b)=>b?a.removeClass("error").addClass("valid"):a.removeClass("valid").addClass("error"),allFieldsValid=a=>{for(var b in valid=!0,validations=getValidations(a),validations)field_validations=validations[b],value=getFieldByID(a,b).val(),$.each(field_validations,(c,d)=>{runValidation(value,d)?"":valid=!1,addValidationClass(getFieldByID(a,b),valid)});return valid},singleFieldValid=(a,b)=>{valid=!0,validations=getFieldValidation(a,b),value=getFieldByID(a,b).val(),$.each(validations,(a,b)=>{runValidation(value,b)?"":valid=!1}),addValidationClass(getFieldByID(a,b),valid)},$("body").on("blur","input, textarea",a=>{singleFieldValid(a.currentTarget.form.id,a.currentTarget.id)})});
