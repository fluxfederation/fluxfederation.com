captcha_sitekey="6LcAZbsUAAAAAGfUVO4VBM5DVEkPySuVX186Kg72",submitted_form_id=null,captcha_response=null,captchaLoaded=(()=>{$(document).ready(function(){captchaAndDocumentLoaded()})}),$(document).ready(function(){captchaAndDocumentLoaded=(()=>{appendCaptchaWatcher(),initCaptcha(),toggleCaptchaBadgeDisplay(),setupForms()}),shouldIncludeCaptcha=(t=>{for(var e of t)if("captcha"==e.type)return!0}),appendCaptchaWatcher=(()=>$("body").append('<div id="recaptcha" data-size="invisible"></div>')),initCaptcha=(()=>{grecaptcha.render("recaptcha",{sitekey:captcha_sitekey,callback:function(t){captcha_response=t,$(`form#${submitted_form_id}`).submit()}})}),toggleCaptchaBadgeDisplay=(()=>{$("#talk-to-us").length||$("#brochure-download-form-container").length||(display=$(".grecaptcha-badge").css("display"),"block"==display?display="none":display="block",$(".grecaptcha-badge").css({display:display}))}),$("body").on("click","a.drop-us-a-line",()=>{toggleCaptchaBadgeDisplay()})}),$(document).ready(function(){function t(){return console.log("testt"),new Promise((t,e)=>{$.ajax({url:"https://cms.fluxfederation.com/wp-json/fluxapi/v1/case-studies",crossDomain:!0,success:e=>t(e),error:t=>e(t)})})}$(".case-studies-page").length&&t().then(t=>e(t));const e=()=>{console.log(self.blogs),$(".show-more").remove(),html="",n=0;for(var t=0;t<6;t++)self.blogs.length&&(n++,blog=self.blogs[0],1==n&&(html+='<div class="news-items-row">'),html+=indexBlogPreview(blog),(3==n||1==self.blogs.length)&&(html+="</div>"),3==n&&(n=0),self.blogs.splice(0,1));self.blogs.length&&(html+=showMorePostsButton()),$(".blog-section").append(html)}}),$(document).ready(function(){"true"!=localStorage.getItem("cookies-ok")&&$(".cookie-disclaimer").show(),setCookiesClose=(()=>{localStorage.setItem("cookies-ok","true")}),$("body").on("click",".cookie-disclaimer-close",()=>{setCookiesClose(),$(".cookie-disclaimer").hide()})}),submitted_form_id=null,$(document).ready(function(){function t(t){return new Promise((e,n)=>{$.ajax({url:"https://cms.fluxfederation.com/wp-json/fluxapi/v1/form/"+t,crossDomain:!0,success:function(t){e(t)},error:function(t){n(t)}})})}function e(t){return console.log(t),form_id=t.form_id,new Promise((e,n)=>{$.ajax({url:"https://cms.fluxfederation.com/wp-json/fluxapi/v1/form/"+form_id,crossDomain:!0,method:"POST",dataType:"json",data:JSON.stringify(t),success:function(t){redirect_url=$(`form#${form_id}`).find("#redirect-url").val(),redirectAfterSuccess(redirect_url),e(t)},error:function(t){n(t)}})})}setupForms=(()=>{$("#talk-to-us").length&&t(1).then(t=>buildForm(t)).then(t=>$(".talk-to-us-container").append(t)).then(()=>addCustomCss(talk_to_us_styles)).catch(t=>console.log(t)),$(".drop-us-a-line-container").length&&t(2).then(t=>buildForm(t)).then(t=>$(".drop-us-a-line-container").append(t)).then(()=>addCustomCss(drop_a_line_styles)).catch(t=>console.log(t)),$("#brochure-download-form-container").length&&t(3).then(t=>buildForm(t)).then(t=>$("#brochure-download-form-container").append(t)).then(()=>addCustomCss(brochure_download_styles)).catch(t=>console.log(t)),$("#get-in-touch-form-2").length&&t(5).then(t=>buildForm(t)).then(t=>$("#get-in-touch-form-2").append(t)).then(()=>addCustomCss(drop_a_line_styles)).catch(t=>console.log(t))}),getFieldByID=((t,e)=>$(`form#${t} *[id="${e}"]`)),addCustomCss=(t=>{$.each(t,(t,e)=>$(t).addClass(e))}),buildForm=(t=>(html=hiddenIdInput(t.id),html+=hiddenRedirectUrl(t),$.each(t.fields,function(t,e){html+=createInput(e)}),html+=submitButton(t.button,t.id),$(`<form id="${t.id}" enctype="text/plain"></form>`).append(html))),createInput=(t=>{switch(t.type){case"checkbox":case"radio":return radioInput(t);case"html":return t.content;case"text":case"email":return textInput(t);case"textarea":return textArea(t);case"captcha":return""}}),pathFromUrl=(t=>new URL(t).pathname),hiddenRedirectUrl=(t=>`<input id="redirect-url" type="hidden" value="${pathFromUrl(t.confirmations[Object.keys(t.confirmations)[0]].url)}"></input>`),redirectAfterSuccess=(t=>window.location.href=t),radioInput=(t=>(html=`<div class="radio-buttons" id="${t.cssClass}-container" >`,$.each(t.choices,function(e,n){html+=`<p><input id="${n.value}" type="${t.type}" name="${t.id}${"checkbox"==t.type?`.${e+1}`:""}" value="${n.value}" ${n.isSelected?" checked":""}><label for="${n.value}">${n.text}</label></p>`}),html+="</div>",html)),textInput=(t=>`<p id="${t.cssClass}-container">${label(t)}<input id="${t.cssClass}" name="${t.id}" type="${t.type}" placeholder="${t.placeholder}"></p>`),textArea=(t=>`<p id="${t.cssClass}-container">${label(t)}<textarea id="${t.cssClass}" name="${t.id}" placeholder="${t.placeholder}"></textarea></p>`),label=(t=>`<label for="${t.cssClass}">${t.label}</label>`),hiddenIdInput=(t=>`<input id="${t}" type="hidden" value="${t}" name="form_id"></input>`),submitButton=((t,e)=>`<div class="flux-button-container"><div class="flux-button" id="${e}"><button>${t.text}</button></div></div>`),processEntry=((t,n=null)=>{data=formDataToJson($(t).serializeArray()),n&&(data={...data,captcha_response:n}),e(data).then(t=>console.log(t)).catch(t=>console.log(t))}),formDataToJson=(t=>(json={},$(t).each((t,e)=>json[e.name]=e.value),json)),$("body").on("click","form .flux-button",t=>{t.preventDefault(),id=t.currentTarget.id,form=$(`form#${id}`),submitted_form_id=id,allFieldsValid(id)&&grecaptcha.execute()}),$("body").on("submit","form",t=>{t.preventDefault(),form=t.currentTarget,captcha_response?processEntry(form,captcha_response):processEntry(form)}),talk_to_us_styles={"#talk-to-us #help-type-radio-container p":"m-all t-1of3","#talk-to-us #email-checkbox-container":"news","#talk-to-us #question-textarea":"full-width"},drop_a_line_styles={".drop-us-a-line-container p":"m-all",".drop-us-a-line-container p label":"m-all d-1of4",".drop-us-a-line-container input, .drop-us-a-line-container textarea":"m-all t-3of4 cf",".drop-us-a-line-container .flux-button-container":"m-all t-1of4 right cf"},brochure_download_styles={"#brochure-download-form-container #help-type-radio-container p":"m-all t-1of3","#brochure-download-form-container #email-checkbox-container":"news","#brochure-download-form-container #question-textarea":"full-width"}}),$(document).ready(function(){function t(){return new Promise((t,e)=>{$.ajax({url:"https://cms.fluxfederation.com/wp-json/fluxapi/v1/events",crossDomain:!0,success:function(e){t(e)},error:function(t){e(t)}})})}function e(t="init"){return url="https://cms.fluxfederation.com/wp-json/fluxapi/v1/posts",new Promise((t,e)=>{$.ajax({url:url,crossDomain:!0,success:function(e){t(e)},error:function(t){e(t)}})})}function o(){const t=()=>new URL(document.location).searchParams.get("name");if(t())return new Promise((e,n)=>{$.ajax({url:`https://cms.fluxfederation.com/wp-json/fluxapi/v1/post/${t()}`,crossDomain:!0,success:function(t){e(t)},error:function(t){n(t)}})});l()}const a=this;$(".events-page").length&&t().then(t=>{a.events=t,$(".skeleton-event-items").remove(),t.length?u(a.events,"event",$(".events-section")):$(".no-events-banner").fadeIn()}),$(".blog-page").length&&(e().then(t=>{a.blogs=t,$(".skeleton-new-items").remove(),u(a.blogs,"blog",$(".blog-section"))}),$(window).on("scroll",()=>{i($("footer"))&&a.blogs&&a.blogs.length&&u(a.blogs,"blog",$(".blog-section"))}));const i=t=>{const e=t.offset().top,n=e+t.outerHeight(),o=$(window).scrollTop(),a=o+$(window).height();return n>o&&e<a};$(".single-blog-page").length&&o().then(t=>r(t)),$(".social-share-container li").click(t=>{switch(current_url=window.location.href,encoded_url=encodeURIComponent(current_url),test_encoded_url=encodeURIComponent("https://fluxfederation.com/"),encoded_title=encodeURIComponent(document.title),facebook_url=`https://www.facebook.com/sharer/sharer.php?u=${encoded_url}&t=${encoded_title}`,twitter_url=`http://twitter.com/share?text=${document.title}&url=${current_url}`,linkedin_url=`https://www.linkedin.com/shareArticle?mini=true&url=${test_encoded_url}&title=${encoded_title}`,t.currentTarget.id){case"facebook":window.open(facebook_url,"pop","width=600, height=400, scrollbars=no");break;case"twitter":window.open(twitter_url,"pop","width=600, height=400, scrollbars=no");break;case"linkedin":window.open(linkedin_url,"pop","width=600, height=400, scrollbars=no");break;case"mail":$(`<a href="mailto:?Subject=${encoded_title}&Body=${encoded_url}"></a>`)[0].click()}}),$(document).on("click",".show-more-blogs .flux-button",()=>u(a.blogs,"blog",$(".blog-section")));const l=()=>window.location.href="../",s=t=>(t=t.split("/"),t=new Date(parseInt(t[2]),parseInt(t[1])-1,parseInt(t[0])),day=t.getDate(),weekday=t.toLocaleString("default",{weekday:"long"}),month_short=t.toLocaleString("default",{month:"short"}),month_long=t.toLocaleString("default",{month:"long"}),{month_short:month_short,month_long:month_long,day:day,weekday:weekday}),r=t=>{""==t.post_content&&l(),$(".blog-title").text(t.post_title),$(g(t)).insertAfter(".blog-title"),$(".banner-image").attr("src",t.banner_image),$(".banner-image-caption").text(t.banner_image_caption),$(".blog-content article").html(t.post_content),$(".fb-share-button").data("href",window.location.href),$.each(t.tags,(t,e)=>$(".tags-container").append(d(e.name))),$.each(t.other_posts,(t,e)=>$(".other-posts").append(v(e))),c(t.post_title)},c=t=>document.title=`${t} - Flux Federation`,d=t=>`<div class="tag">${t}</div>`,u=(t,e,o)=>{html="",n=0;for(var a=0;a<6;a++)t.length&&(n++,item=t[0],1==n&&(html+='<div class="news-items-row">'),html+="blog"==e?_(item):h(item),(3==n||1==t.length)&&(html+="</div>"),3==n&&(n=0),t.splice(0,1));o.append(html)},m=t=>{const e=s(t.start_date),n=t.end_date?s(t.end_date):null;return`${e.weekday} ${e.day} ${e.month_short} ${t.end_date?`- ${n.weekday} ${n.day} ${n.month_short}`:""}`},h=t=>(html=`<div class="m-all t-4of12 news-item">\n\t\t\t<img src="${t.image_url}" class="item-image item-image-logo">\n\t\t\t<h4>${t.title}</h4>\n\t\t\t<div class="cf item-info event-info">\n\t\t\t\t<div class="cf">\n\t\t\t\t\t<p>${m(t)} ${t.start_time&&t.end_time?`${t.start_time}-${t.end_time}`:""}</p><br>\n\t\t\t\t\t<p class="small-text"><a href="${t.ics_file_url}">Add to Calendar</a></p><br>\n\t\t\t\t</div>\n\t\t\t\t<div class="cf">\n\t\t\t\t\t<p>${t.location.address.split(",")[0]}</p><br>\n\t\t\t\t\t<p class="small-text"><a target="_blank" href="${p(t.location.address)}">View Map</a></p>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<p class="preview">${t.description}</p>\n\t\t\t${b(t.redirect_url)}\n\t\t</div>`,html),p=t=>`http://www.google.com/maps/?q=${encodeURIComponent(t)}`,g=t=>(console.log(t),date=s(t.date_written),html=`<div class="cf item-info">\n\t\t\t<image class="item-author-image" src="${t.author_image}"">\n\t\t\t<strong><p class="item-info-text-margin">${t.author_name}</p></strong>\n\t\t\t<br>\n\t\t\t<p class="item-meta-info">${date.month_short} ${date.day} | ${t.read_time} min read</p>\n\t\t</div>`,html),f=t=>`<div class="flux-button news-item-button"><a href="/newsroom/blog/post/?name=${t}">Read More</a></div>`,b=t=>`<div class="flux-button news-item-button"><a target="_blank" href="${t}">Read More</a></div>`,_=t=>(html=`<div class="m-all t-4of12 news-item">\n\t\t\t<a href="post/?name=${t.post_name}">\n\t\t\t\t<img src="${t.banner_image}" class="item-image">\n\t\t\t\t<h4>${t.post_title}</h4>\n\t\t\t</a>\n\t\t\t${g(t)}\n\t\t\t<p class="preview">${t.post_preview}</p>\n\t\t\t${f(t.post_name)}\n\t\t</div>`,html),v=t=>(html=`<div class="news-item">\n\t\t\t<a class="t-2of5" href="../post/?name=${t.post_name}">\n\t\t\t\t<img src="${t.banner_image}" class="item-image m-all">\n\t\t\t</a>\n\t\t\t<div class="t-3of5 m-all">\n\t\t\t\t<h4>${t.post_title}</h4>\n\t\t\t\t${g(t)}\n\t\t\t\t<p class="preview remove-all-padding">${t.post_preview}</p>\n\t\t\t\t${f(t.post_name)}\n\t\t\t</div>\n\t\t</div>`,html)}),$(document).ready(function(){drop_a_line__validations={"name-input":["aboveMinLength","belowMaxLength","noNumbers"],"email-input":["isEmail"],"help-textarea":["aboveMinLength"]},talk_to_us_validations={"name-input":["aboveMinLength","belowMaxLength","noNumbers"],"company-input":["aboveMinLength","belowMaxLength"],"role-input":["aboveMinLength","belowMaxLength"],"email-input":["isEmail"],"question-textarea":["aboveMinLength"]},brochure_download_validations={"name-input":["aboveMinLength","belowMaxLength","noNumbers"],"company-input":["aboveMinLength","belowMaxLength"],"role-input":["aboveMinLength","belowMaxLength"],"email-input":["isEmail"]},getValidations=(t=>{switch(t){case"1":return talk_to_us_validations;case"2":case"5":return drop_a_line__validations;case"3":return brochure_download_validations}}),runValidation=((t,e)=>{switch(e){case"aboveMinLength":return aboveMinLength(t);case"belowMaxLength":return belowMaxLength(t);case"isEmail":return isEmail(t);case"noNumbers":return noNumbers(t)}}),aboveMinLength=(t=>t.length>=3),belowMaxLength=(t=>t.length<=30),isEmail=(t=>/\S+@\S+\.\S+/.test(t)),noNumbers=(t=>!/\d/.test(t)),getFieldValidation=((t,e)=>getValidations(t)[e]),addValidationClass=((t,e)=>e?t.removeClass("error").addClass("valid"):t.removeClass("valid").addClass("error")),allFieldsValid=(t=>{for(var e in valid=!0,validations=getValidations(t),validations)field_validations=validations[e],value=getFieldByID(t,e).val(),$.each(field_validations,(n,o)=>{!runValidation(value,o)&&(valid=!1),addValidationClass(getFieldByID(t,e),valid)});return valid}),singleFieldValid=((t,e)=>{valid=!0,validations=getFieldValidation(t,e),value=getFieldByID(t,e).val(),$.each(validations,(t,e)=>{!runValidation(value,e)&&(valid=!1)}),addValidationClass(getFieldByID(t,e),valid)}),$("body").on("blur","input, textarea",t=>{singleFieldValid(t.currentTarget.form.id,t.currentTarget.id)})});