captcha_sitekey="6LcAZbsUAAAAAGfUVO4VBM5DVEkPySuVX186Kg72",submitted_form_id=null,captcha_response=null,captchaLoaded=()=>{$(document).ready(function(){captchaAndDocumentLoaded()})},$(document).ready(function(){captchaAndDocumentLoaded=()=>{appendCaptchaWatcher(),initCaptcha(),toggleCaptchaBadgeDisplay(),setupForms()},shouldIncludeCaptcha=a=>{for(var b of a)if("captcha"==b.type)return!0},appendCaptchaWatcher=()=>$("body").append(`<div id="recaptcha" data-size="invisible"></div>`),initCaptcha=()=>{grecaptcha.render(`recaptcha`,{sitekey:captcha_sitekey,callback:function(a){captcha_response=a,$(`form#${submitted_form_id}`).submit()}})},toggleCaptchaBadgeDisplay=()=>{$("#talk-to-us").length||$("#brochure-download-form-container").length||(display=$(".grecaptcha-badge").css("display"),display="block"==display?"none":"block",$(".grecaptcha-badge").css({display:display}))},$("body").on("click","a.drop-us-a-line",()=>{toggleCaptchaBadgeDisplay()})});
$(document).ready(function(){"true"==localStorage.getItem("cookies-ok")?"":$(".cookie-disclaimer").show(),setCookiesClose=()=>{localStorage.setItem("cookies-ok","true")},$("body").on("click",".cookie-disclaimer-close",()=>{setCookiesClose(),$(".cookie-disclaimer").hide()})});
submitted_form_id=null,$(document).ready(function(){function a(a){return new Promise((b,c)=>{$.ajax({url:"https://fluxfederation.wpengine.com/wp-json/fluxapi/v1/form/"+a,crossDomain:!0,success:function(a){b(a)},error:function(a){c(a)}})})}function b(a){return form_id=a.form_id,new Promise((b,c)=>{$.ajax({url:"https://fluxfederation.wpengine.com/wp-json/fluxapi/v1/form/"+form_id,crossDomain:!0,method:"POST",dataType:"json",data:JSON.stringify(a),success:function(a){redirect_url=$(`form#${form_id}`).find("#redirect-url").val(),redirectAfterSuccess(redirect_url),b(a)},error:function(a){c(a)}})})}setupForms=()=>{$("#talk-to-us").length&&a(1).then(a=>buildForm(a)).then(a=>$(".talk-to-us-container").append(a)).then(()=>addCustomCss(talk_to_us_styles)).catch(a=>console.log(a)),$(".drop-us-a-line-container").length&&a(2).then(a=>buildForm(a)).then(a=>$(".drop-us-a-line-container").append(a)).then(()=>addCustomCss(drop_a_line_styles)).catch(a=>console.log(a)),$("#brochure-download-form-container").length&&a(3).then(a=>buildForm(a)).then(a=>$("#brochure-download-form-container").append(a)).then(()=>addCustomCss(brochure_download_styles)).catch(a=>console.log(a)),$("#get-in-touch-form-2").length&&a(5).then(a=>buildForm(a)).then(a=>$("#get-in-touch-form-2").append(a)).then(()=>addCustomCss(drop_a_line_styles)).catch(a=>console.log(a))},addCustomCss=a=>{$.each(a,(a,b)=>$(a).addClass(b))},buildForm=a=>(html=hiddenIdInput(a.id),html+=hiddenRedirectUrl(a),$.each(a.fields,function(a,b){html+=createInput(b)}),html+=submitButton(a.button,a.id),$(`<form id="${a.id}" enctype="text/plain"></form>`).append(html)),createInput=a=>{switch(a.type){case"checkbox":case"radio":return radioInput(a);break;case"html":return a.content;break;case"text":return textInput(a);break;case"email":return textInput(a);break;case"textarea":return textArea(a);case"captcha":return"";}},pathFromUrl=a=>new URL(a).pathname,hiddenRedirectUrl=a=>`<input id="redirect-url" type="hidden" value="${pathFromUrl(a.confirmations[Object.keys(a.confirmations)[0]].url)}"></input>`,redirectAfterSuccess=a=>window.location.href=a,radioInput=a=>(html=`<div class="radio-buttons" id="${a.cssClass}-container" >`,$.each(a.choices,function(b,c){html+=`<p><input id="${c.value}" type="${a.type}" name="${a.id}${"checkbox"==a.type?`.${b+1}`:""}" value="${c.value}" ${c.isSelected?" checked":""}><label for="${c.value}">${c.text}</label></p>`}),html+="</div>",html),textInput=a=>`<p id="${a.cssClass}-container">${label(a)}<input id="${a.cssClass}" name="${a.id}" type="${a.type}" placeholder="${a.placeholder}"></p>`,textArea=a=>`<p id="${a.cssClass}-container">${label(a)}<textarea id="${a.cssClass}" name="${a.id}" placeholder="${a.placeholder}"></textarea></p>`,label=a=>`<label for="${a.cssClass}">${a.label}</label>`,hiddenIdInput=a=>`<input id="${a}" type="hidden" value="${a}" name="form_id"></input>`,submitButton=(a,b)=>`<div class="flux-button-container"><div class="flux-button" id="${b}"><button>${a.text}</button></div></div>`,processEntry=(a,c=null)=>{data=formDataToJson($(a).serializeArray()),c?data={...data,captcha_response:c}:"",b(data).then(a=>console.log(a)).catch(a=>console.log(a))},formDataToJson=a=>(json={},$(a).each((a,b)=>json[b.name]=b.value),json),$("body").on("click","form .flux-button",a=>{a.preventDefault(),id=a.currentTarget.id,form=$(`form#${id}`),submitted_form_id=id,allFieldsValid(id)?grecaptcha.execute():""}),$("body").on("submit","form",a=>{a.preventDefault(),form=a.currentTarget,captcha_response?processEntry(form,captcha_response):processEntry(form)}),talk_to_us_styles={"#talk-to-us #help-type-radio-container p":"m-all t-1of3","#talk-to-us #email-checkbox-container":"news","#talk-to-us #question-textarea":"full-width"},drop_a_line_styles={".drop-us-a-line-container p":"m-all",".drop-us-a-line-container p label":"m-all d-1of4",".drop-us-a-line-container input, .drop-us-a-line-container textarea":"m-all t-3of4 cf",".drop-us-a-line-container .flux-button-container":"m-all t-1of4 right cf"},brochure_download_styles={"#brochure-download-form-container #help-type-radio-container p":"m-all t-1of3","#brochure-download-form-container #email-checkbox-container":"news","#brochure-download-form-container #question-textarea":"full-width"}});
$(document).ready(function(){$(".events-page").length?function(){return new Promise((a,b)=>{$.ajax({url:"https://fluxfederation.wpengine.com/wp-json/fluxapi/v1/events",crossDomain:!0,success:function(b){a(b)},error:function(a){b(a)}})})}().then(a=>addEventsToPage(a)):"",$(".blog-page").length?function(){return new Promise((a,b)=>{$.ajax({url:"https://fluxfederation.wpengine.com/wp-json/fluxapi/v1/posts",crossDomain:!0,success:function(b){a(b)},error:function(a){b(a)}})})}().then(a=>addBlogsToPage(a)):"",$(".single-blog-page").length?function(){const a=()=>new URL(document.location).searchParams.get("id");return console.log("test"),a()?new Promise((b,c)=>{$.ajax({url:`https://fluxfederation.wpengine.com/wp-json/fluxapi/v1/post/${a()}`,crossDomain:!0,success:function(a){b(a)},error:function(a){c(a)}})}):void(window.location.href="../")}().then(a=>addBlogToPage(a)):"",addEventsToPage=a=>{html=`<article class="wrap cf">`,$.each(a.reverse(),(a,b)=>html+=eventItem(b)),html+=`</article>`,$(".events-page").append(html)},addBlogToPage=a=>{console.log(a),""==a.post_content?window.location.href="../":"",$(".js-blog-title").text(a.post_title),$(".banner-image").attr("src",a.banner_image),$(".banner-image-caption").text(a.banner_image_caption),$(".blog-content article").html(a.post_content)},addBlogsToPage=a=>{html=`<article class="wrap cf">`,n=0,$.each(a.reverse(),(a,b)=>{n++,1==n?html+=`<div class="news-items-row">`:"",html+=blogItem(b),3==n?html+=`</div>`:"",3==n?n=0:""}),html+=`</article>`,$(".blog-page").append(html)},eventItem=a=>(console.log(a),html=`<div class="m-all t-4of12 news-item">
				<img src="${a.image_url}" class="item-image item-image-logo">
				<h4>${a.title}</h4>
				<div class="cf item-info">
					<strong><p>${a.dates}</p></strong>
					<br>
					<p class="item-meta-info">${a.blurb}</p>
				</div>
			</div>`,html),blogItem=a=>(console.log(a),date_written=a.date_written.split("/"),date=new Date(parseInt(date_written[0]),parseInt(date_written[1]),parseInt(date_written[2])),day=date.getDate(),month=date.toLocaleString("default",{month:"short"}),html=`<div class="m-all t-4of12 news-item">
				<a href="post?id=${a.ID}">
					<img src="${a.banner_image}" class="item-image">
					<h4>${a.post_title.substring(0,25)}..</h4>
				</a>
				<div class="cf item-info">
					<image class="item-author-image" src="${a.author_image}"">
					<strong><p class="item-info-text-margin">${a.author_name}</p></strong>
					<br>
					<p class="item-meta-info item-info-text-margin">${month} ${day} | ${a.read_time} min read</p>
				</div>
			</div>`,html)});
$(document).ready(function(){drop_a_line__validations={"name-input":["aboveMinLength","belowMaxLength","noNumbers"],"email-input":["isEmail"],"help-textarea":["aboveMinLength"]},talk_to_us_validations={"name-input":["aboveMinLength","belowMaxLength","noNumbers"],"company-input":["aboveMinLength","belowMaxLength"],"role-input":["aboveMinLength","belowMaxLength"],"email-input":["isEmail"],"question-textarea":["aboveMinLength"]},brochure_download_validations={"name-input":["aboveMinLength","belowMaxLength","noNumbers"],"company-input":["aboveMinLength","belowMaxLength"],"role-input":["aboveMinLength","belowMaxLength"],"email-input":["isEmail"]},getValidations=a=>{switch(a){case"1":return talk_to_us_validations;break;case"2":case"5":return drop_a_line__validations;break;case"3":return brochure_download_validations;}},runValidation=(a,b)=>{switch(b){case"aboveMinLength":return aboveMinLength(a);break;case"belowMaxLength":return belowMaxLength(a);break;case"isEmail":return isEmail(a);break;case"noNumbers":return noNumbers(a);}},aboveMinLength=a=>3<=a.length,belowMaxLength=a=>30>=a.length,isEmail=a=>/\S+@\S+\.\S+/.test(a),noNumbers=a=>!/\d/.test(a),getFieldValidation=(a,b)=>getValidations(a)[b],addValidationClass=(a,b)=>b?a.removeClass("error").addClass("valid"):a.removeClass("valid").addClass("error"),allFieldsValid=a=>{for(var b in valid=!0,validations=getValidations(a),validations)field_validations=validations[b],value=getFieldByID(a,b).val(),$.each(field_validations,(c,d)=>{runValidation(value,d)?"":valid=!1,addValidationClass(getFieldByID(a,b),valid)});return valid},singleFieldValid=(a,b)=>{valid=!0,validations=getFieldValidation(a,b),value=getFieldByID(a,b).val(),$.each(validations,(a,b)=>{runValidation(value,b)?"":valid=!1}),addValidationClass(getFieldByID(a,b),valid)},$("body").on("blur","input, textarea",a=>{singleFieldValid(a.currentTarget.form.id,a.currentTarget.id)})});
